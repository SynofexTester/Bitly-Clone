{% extends 'base.html' %}

{% block content %}
<div class="card">
    <h1 class="title">Shorten Your Link</h1>
    <p class="subtitle">Enter a long URL to create a short, shareable link.</p>

    <form method="POST" class="shortener-form">
        <div class="input-group">
            <input type="url" name="original_url" placeholder="https://example.com/very-long-url..." required>
        </div>
        <button type="submit" class="btn-primary">Shorten URL</button>
    </form>

    {% if error %}
    <div class="alert error">
        {{ error }}
    </div>
    {% endif %}

    {% if short_url %}
    <div class="result-container">
        <p class="result-label">Your short link:</p>
        <div class="result-box">
            <a href="{{ short_url }}" target="_blank" id="short-link">{{ short_url }}</a>
            <button onclick="copyToClipboard()" class="btn-copy">Copy</button>
        </div>
    </div>
    {% endif %}
</div>

<script>
    function copyToClipboard() {
        const copyText = document.getElementById("short-link").href;
        navigator.clipboard.writeText(copyText).then(() => {
            const btn = document.querySelector('.btn-copy');
            btn.textContent = 'Copied!';
            setTimeout(() => {
                btn.textContent = 'Copy';
            }, 2000);
        });
    }
</script>
{% endblock %}